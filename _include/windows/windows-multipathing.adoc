= ステップ4: ホストのマルチパス構成を確認する
:allow-uri-read: 




== ステップ4: ホストのマルチパス構成を確認する

Windows ホストにストレージ システムへのパスが複数ある場合は、Microsoft Multipath I/O (MPIO) ソフトウェアをインストールし、マルチパスを有効にします。

Windows システムでは、MPIO ソリューションの 2 つの主要コンポーネントは、デバイス固有モジュール (DSM) と Windows MPIO です。MPIO はすべてのパスに対して 1 つのディスクを Windows OS に提示し、DSM はパスのフェイルオーバーを管理します。


CAUTION: MPIOソフトウェアをインストールしない場合、Windows OSは各パスを個別のディスクとして認識する可能性があります。これにより、データが破損する可能性があります。


NOTE: Hyper-V仮想マシンで実行されているWindows XPまたはWindows Vistaは、MPIOをサポートしていません。

.手順
. MPIO ソフトウェアをインストールし、マルチパスを有効にします。
. FCを使用するシステムでMPIOを選択すると、EmulexおよびQLogic FC HBAに必要なタイムアウト値がHost Utilitiesインストーラによって設定されます。
+
[role="tabbed-block"]
====
.Emulex FC
--
Emulex FC HBAのタイムアウト値：

[cols="2*"]
|===
| プロパティタイプ | プロパティ値 


| LinkTimeOut | 1. 


| ノードタイムアウト | 10. 
|===
--
.QLogic FC
--
QLogic FC HBAのタイムアウト値は次のとおりです。

[cols="2*"]
|===
| プロパティタイプ | プロパティ値 


| LinkDownTimeOut の 2 つのリンクがあり | 1. 


| PortDownRetryCount のように指定します | 10. 
|===
--
====
. ONTAP LUN のパスのステータスを確認します。
+
SAN 構成に応じて、ホストはASA、 AFF、またはFAS構成を使用してONTAP LUN にアクセスします。これらの構成では、単一のONTAP LUN にアクセスするために 4 つを超えるパスは必要ありません。パスが 4 つを超えると、ストレージ障害時に問題が発生する可能性があります。

+
次の出力例は、 ASA、 AFF、またはFAS構成のONTAP LUN の正しい設定を示しています。

+
[role="tabbed-block"]
====
.ASA構成
--
ASA構成には、単一の優先順位を持つアクティブ/最適化されたパスの 1 つのグループが必要です。コントローラはパスを処理し、すべてのアクティブ パスで I/O を送信します。

image::asa.png[アクティブ/最適パスが表示されたONTAP LUNのスクリーンショット]

--
.AFFまたはFASの設定
--
AFFまたはFAS構成には、優先度が異なる 2 つのパス グループが必要です。優先度の高いパスはアクティブ/最適化されており、アグリゲートが配置されているコントローラによってサービスされます。優先度の低いパスは別のコントローラからサービスされます。これらはアクティブですが最適化されておらず、最適化されたパスが利用できない場合にのみ使用されます。

image::nonasa.png[2つのアクティブ/最適パスと2つのアクティブ/非最適パスを含むONTAP LUNのスクリーンショット]

--
====

